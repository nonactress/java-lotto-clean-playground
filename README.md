# Java Lotto Clean Playground

## 📖 개요

## ✨ 주요 기능

-   **로또 구매**: 입력한 금액에 맞춰 1,000원 단위로 로또를 구매합니다.
-   **수동/자동 구매**: 원하는 개수만큼 로또 번호를 직접 선택하는 수동 구매와 나머지 개수를 자동으로 발급받는 기능을 지원합니다.
-   **구매 내역 출력**: 구매한 모든 로또(수동, 자동)의 번호를 출력합니다.
-   **당첨 통계**: 사용자가 입력한 당첨 번호 및 보너스 번호를 기반으로 당첨 내역을 계산합니다.
    -   1등: 6개 번호 일치
    -   2등: 5개 번호 + 보너스 번호 일치
    -   3등: 5개 번호 일치
    -   4등: 4개 번호 일치
    -   5등: 3개 번호 일치
-   **수익률 계산**: 총 구매 금액 대비 당첨금 총액을 기반으로 한 수익률을 소수점 둘째 자리까지 계산하여 출력합니다.

```
.
└── src
    └── main
        └── java
            ├── Application.java      # 애플리케이션 시작점
            ├── Controller
            │   └── LottoController.java  # 게임 흐름 제어
            ├── Model
            │   ├── Lotto.java        # 로또 1장
            │   ├── Lottos.java       # 발급된 전체 로또
            │   ├── Jackpot.java      # 당첨 번호와 보너스 번호
            │   ├── LottoMatcher.java # 로또 당첨 여부 확인 및 통계 계산
            │   ├── PrizeMoney.java   # 등수별 상금 Enum
            │   ├── AutoLotto.java    # 자동 로또 번호 생성
            │   └── ManualLotto.java  # 수동 로또 번호 관리
            └── View
                ├── InputView.java    # 사용자 입력 처리
                └── OutView.java      # 결과 출력 담당
               
```

## ⚙️ 핵심 로직 상세

### 1. 로또 생성 (`Lottos.java`)

-   `Lottos` 클래스는 사용자가 구매한 모든 로또 티켓을 관리합니다.
-   `InputView`를 통해 받은 수동 구매 개수와 번호 문자열 리스트를 `ManualLotto`를 통해 `Lotto` 객체 리스트로 변환합니다.
-   총 구매 개수에서 수동 구매 개수를 뺀 만큼 `AutoLotto`를 통해 자동으로 로또 번호를 생성합니다.
-   `AutoLotto`는 `Collections.shuffle`을 활용하여 1부터 45까지의 숫자 중 6개를 무작위로 선택하여 중복 없는 번호를 생성합니다.

### 2. 당첨 확인 (`LottoMatcher.java`)

`LottoMatcher`는 로또 게임의 당첨 결과를 판별하고 통계를 내는, 가장 중요한 비즈니스 로직을 담당하는 클래스입니다. 객체가 생성되는 시점에 모든 핵심 연산을 수행하여 내부에 결과를 저장하고, 외부에는 요청에 따라 계산된 결과를 즉시 제공하는 방식으로 설계되었습니다.

#### 동작 원리

1.  **생성 및 초기화**: `LottoController`가 `new LottoMatcher(lottos, jackpot)` 코드로 객체를 생성하면, `LottoMatcher`의 생성자가 실행되며 모든 계산이 즉시 이루어집니다.
    -   **데이터 준비**: 생성자는 사용자가 구매한 모든 로또 티켓 묶음(`lottos`)과 당첨 번호 정보(`jackpot`)를 인자로 받습니다. 그리고 당첨 통계를 저장할 `matchCounts`라는 `Map`을 초기화합니다. 이 맵은 `{일치 개수: 당첨된 티켓 수}` 형태로 통계를 저장하게 됩니다.
    -   **개별 티켓 비교**: `for` 루프를 통해 구매한 로또 티켓을 한 장씩 순회하며 각 티켓별로 당첨 등수를 판별합니다.
        -   먼저 해당 티켓의 번호 6개가 당첨 번호 6개와 몇 개나 일치하는지 계산합니다.
        -   만약 일치 개수가 정확히 **5개**라면, 2등 당첨 가능성이 생깁니다. 이때, 해당 로또 티켓이 **보너스 번호를 포함하고 있는지** 추가로 확인하여 2등과 3등을 구분합니다.
        -   2등(5개 일치 + 보너스 번호 포함)으로 확인되면, `matchCounts` 맵에 `7`이라는 특별한 키값으로 당첨 횟수를 1 증가시킵니다.
        -   그 외의 경우(3, 4, 5, 6개 일치), 계산된 일치 개수를 키로 사용하여 `matchCounts` 맵의 카운트를 1 증가시킵니다.

2.  **결과 제공**: 모든 계산이 완료된 `LottoMatcher` 객체는 `LottoController`의 요청에 따라 아래 메소드들을 통해 결과를 제공합니다.
    -   `getMatchCounts()`: 모든 계산이 완료된 `matchCounts` 맵을 반환합니다. `OutView`는 이 맵을 받아 최종 당첨 통계를 화면에 출력합니다.
    -   `calculateTotalEarnings()`: `matchCounts` 맵과 `PrizeMoney` Enum을 기반으로 총상금을 계산합니다.
    -   `getRate()`: `calculateTotalEarnings()`로 계산된 총상금을 사용자의 총 구매 금액으로 나누어 최종 수익률을 계산합니다.
